<?php//// Конттроллер страниц.//class C_Templates extends C_Admin_Base{	//	// Конструктор.	//	public function __construct(){		parent::__construct();	}		public function before(){		parent::before();	}	public function action_index(){		$this->action_all();	}		public function action_all()	{		$this->title .= '::Шаблоны страниц';			$tpl_num = isset($this->params[2]) ? (int)$this->params[2] : 1;        $mPagination = new M_Pagination('templates', '/templates/all/');        $templates = $mPagination->on_page(5)->page_num($tpl_num)->page();                $navbar = $this->Template('v/v_navbar.php', array('navparams' => $mPagination->navparams()));        $this->content = $this->Template('v/templates/v_all.php', array('templates' => $templates,                                                                       'navparams' => $mPagination->navparams(),                                                                       'navbar' => $navbar));	}		public function action_add()	{		$this->title .= ' :: Добавление шаблона';		$messages = array(); 		$mTpl = M_Templates::Instance();		if($this->isPost())		{			if($mTpl->add($_POST))				$this->redirect("/templates");						$fields = $_POST;			$messages = $mTpl->errors();		}				$this->content = $this->Template('v/templates/v_add.php', array('fields' => $fields,						'messages' => $messages, 'templates' => $mTpl->get_templates()));			}	public function action_delete()	{        if($this->IsGet())        {            M_Templates::Instance()->delete($this->params[2]);            $this->redirect('/templates');        }    }}